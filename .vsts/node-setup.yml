steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '16.x.x'
    displayName: Set NodeJS version

  - script: cp .vsts/pipelines.npmrc $(Agent.TempDirectory)/.npmrc
    displayName: Stage .npmrc file

  - task: npmAuthenticate@0
    displayName: NPM auth
    inputs:
      workingFile: $(Agent.TempDirectory)/.npmrc

  - script: |
      echo "##vso[task.setvariable variable=NPM_CONFIG_USERCONFIG]$(Agent.TempDirectory)/.npmrc"
    displayName: Set NPM configuration environment variable
