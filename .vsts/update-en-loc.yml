pool:
  name: Azure-Pipelines-EO-Batch-Explorer
  demands:
  - ImageOverride -equals BatchExplorerBuildImage-Windows
steps:

  - task: OneLocBuild@2
    env:
      SYSTEM_ACCESSTOKEN: $(System.AccessToken)
    inputs:
      locProj: 'Localize/LocProject.json'
      outDir: '$(Build.ArtifactStagingDirectory)'
      isCreatePrSelected: true
      prSourceBranchPrefix: 'locfiles'
      dependencyPackageSource: 'https://azurebatch.pkgs.visualstudio.com/_packaging/BatchExplorer/nuget/v3/index.json'
      repoType: 'gitHub'
      packageSourceAuth: 'patAuth'
      gitHubPatVariable: '$(GH_TOKEN)'

  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(Build.ArtifactStagingDirectory)'
      ArtifactName: 'drop'
      publishLocation: 'Container'
