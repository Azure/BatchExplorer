steps:
  - template: ../dependencies.yml

  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.8.x'
    displayName: Install python 3.8 for BatchExplorer

  - powershell: |
      . .vsts/win/exec.ps1
      $ErrorActionPreference = "Stop"
      exec { python -m pip install --upgrade pip }
      exec { python --version }
      exec { pip install -r ./desktop/python/requirements.txt }
      exec { Write-Host "Node.js version" $(node --version) }
      exec { Write-Host "NPM version" $(npm --version) }
      exec { npm install -g yarn }
      exec { Write-Host "Yarn version" $(yarn --version) }
      exec { yarn install }
    displayName: Install Windows dependencies
