steps:
  - template: ../dependencies.yml
  # - task: UsePythonVersion@0
  #   inputs:
  #     versionSpec: '2.7.x'

  - powershell: |
      npm install --global --production windows-build-tools
      # $pythonPath = Get-Command python | Select-Object -ExpandProperty Definition
      # echo "Python2 $pythonPath"
      # npm config set python $pythonPath
      # npm config set msvs_version 2015

  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.6.x'
  - powershell: |
      $ErrorActionPreference = "Stop"
      node --version
      npm install -g npm
      npm ci
      pip install -r python/requirements.txt
    displayName: Install dependencies
