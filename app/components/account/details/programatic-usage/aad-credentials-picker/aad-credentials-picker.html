<ng-container [ngSwitch]="currentStep">
    <bl-aad-app-picker *ngSwitchCase="Step.pickApplication" (selectedApplicationChanged)="pickApplication($event)" (createApp)="createApp()">
    </bl-aad-app-picker>

    <bl-generate-aad-app-secret *ngSwitchCase="Step.generateSecret" [account]="account" [application]="pickedApplication" (secretPicked)="pickSecret($event)">
    </bl-generate-aad-app-secret>


    <bl-create-new-aad-app *ngSwitchCase="Step.createApplication" [account]="account" (appCreated)="appCreated($event)">
    </bl-create-new-aad-app>

    <div *ngSwitchCase="Step.displaySecret" class="view-credentials">
        <h1>AAD Credentials</h1>

        <bl-property-list>
            <bl-property-group>
                <bl-text-property label="Tenant Id" [value]="tenantId"></bl-text-property>
                <bl-text-property label="Client Id" [value]="pickedApplication.id"></bl-text-property>
                <div class="danger">
                    <i class="fa fa-warning"></i>Save this key, you will not see it again after closing this dialog.
                </div>
                <bl-text-property label="Secret" [value]="pickedSecret.value"></bl-text-property>
            </bl-property-group>
        </bl-property-list>

        <div class="permissions">
            <h4>Permissions</h4>
            <bl-table>
                <bl-row key="batch">
                    <bl-cell [value]="account.id">Batch account</bl-cell>
                    <bl-cell>
                        <bl-resource-permission-button [resourceId]="account.id" [principalId]="principalId"></bl-resource-permission-button>
                    </bl-cell>
                </bl-row>
                <bl-row *ngIf="storageAccountId" key="storage">
                    <bl-cell [value]="storageAccountId">Storage account</bl-cell>
                    <bl-cell>
                        <bl-resource-permission-button [resourceId]="storageAccountId" [principalId]="principalId"></bl-resource-permission-button>
                    </bl-cell>
                </bl-row>
            </bl-table>
        </div>
    </div>
</ng-container>
