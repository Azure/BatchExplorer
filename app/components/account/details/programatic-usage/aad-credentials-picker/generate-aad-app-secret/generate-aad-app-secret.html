<div class="header">
    <bl-button type="square" (do)="cancel.emit()">
        <i class="fa fa-arrow-left"></i>
    </bl-button>
    <h1>Step 2: Retrieve a secret for {{application.displayName}}</h1>
</div>
<div class="permissions">
    <h4>Permissions</h4>
    <bl-table>
        <bl-row key="batch">
            <bl-cell [value]="account.id">Batch account</bl-cell>
            <bl-cell>
                <bl-resource-permission-button [resourceId]="account.id" [principalId]="principalId"></bl-resource-permission-button>
            </bl-cell>
        </bl-row>
        <bl-row *ngIf="storageAccountId" key="storage">
            <bl-cell [value]="storageAccountId">Storage account</bl-cell>
            <bl-cell>
                <bl-resource-permission-button [resourceId]="storageAccountId" [principalId]="principalId"></bl-resource-permission-button>
            </bl-cell>
        </bl-row>
    </bl-table>
</div>

<div class="secrets" *ngIf="application">
    <h4>Secret</h4>
    <div *ngIf="passwordCredentials.size > 0">
        There is already {{passwordCredentials.size}} secret(s) associated to this application
    </div>
    <div class="secrets-form">
        <bl-aad-app-secret-picker [formControl]="secret">
        </bl-aad-app-secret-picker>

        <bl-button type="wide" color="primary" [action]="addNewSecret" matTooltip="Add a new secret without modifing the existing ones">
            Add
        </bl-button>

        <bl-button *ngIf="passwordCredentials.size > 0" type="wide" color="danger" [action]="resetCredentials" matTooltip="Reset credentials. This will remove all existing secrets and replace it with a new one">
            Reset
        </bl-button>
    </div>
</div>
