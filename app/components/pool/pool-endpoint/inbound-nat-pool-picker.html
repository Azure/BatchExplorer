<div [formGroup]="form">
    <div class="grow">
        <div class="gcol">
            <mat-form-field class="form-element">
                <input matInput formControlName="name" placeholder="Name of endpoint">
            </mat-form-field>
            <bl-error controlName="name" code="required">Name of endpoint is a required field</bl-error>
            <bl-error controlName="name" code="duplicateValue">Name of endpoint must be unique</bl-error>
            <bl-error controlName="name" code="invalidValue">
                Name of endpoint can only contain letters, numbers, underscores, periods, and hyphens. Names must start with a letter or number, must end with a letter, number, or underscore, and cannot exceed {{maxEndpointNameLength}} characters
            </bl-error>
        </div>
        <div class="gcol">
            <mat-form-field class="form-element">
                <mat-select formControlName="protocol" color="primary" placeholder="Protocol" required>
                    <mat-option [value]="InboundEndpointProtocol.TCP">TCP</mat-option>
                    <mat-option [value]="InboundEndpointProtocol.UDP">UDP</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <div class="grow">
        <div class="gcol">
            <mat-form-field class="form-element">
                <input matInput type="number" formControlName="frontendPortRangeStart" placeholder="Frontend port start">
            </mat-form-field>
            <bl-error controlName="frontendPortRangeStart" code="required">Frontend port start is a required field</bl-error>
            <bl-error controlName="frontendPortRangeStart" code="invalidRange">Frontend port must be between {{minPort}} and {{maxFronendPort}}</bl-error>
            <bl-error controlName="frontendPortRangeStart" code="reservedPort">Ports from {{minReservedFrontend}} to {{maxReservedFrontend}} are reserved by the Batch service</bl-error>
        </div>
        <div class="gcol">
            <mat-form-field class="form-element">
                <input matInput type="number" formControlName="frontendPortRangeEnd" placeholder="Frontend port end">
            </mat-form-field>
            <bl-error controlName="frontendPortRangeEnd" code="required">Frontend port end is a required field</bl-error>
            <bl-error controlName="frontendPortRangeEnd" code="invalidRange">Frontend port must be between {{minPort}} and {{maxFronendPort}}</bl-error>
            <bl-error controlName="frontendPortRangeEnd" code="reservedPort">Ports from {{minReservedFrontend}} to {{maxReservedFrontend}} are reserved by the Batch service</bl-error>
        </div>
        <div class="gcol">
            <mat-form-field class="form-element">
                <input matInput type="number" formControlName="backendPort" placeholder="Backend port">
            </mat-form-field>
            <bl-error controlName="backendPort" code="required">Backend port is a required field</bl-error>
            <bl-error controlName="backendPort" code="duplicateValue">Backend port must be unique</bl-error>
            <bl-error controlName="backendPort" code="invalidRange">Backend port must be between {{minPort}} and {{maxBackendPort}}</bl-error>
            <bl-error controlName="backendPort" code="reservedPort">{{ reservedBackendPort.join(", ") }} are reserved by the Batch service</bl-error>
        </div>
    </div>
    <div *ngIf="form.errors?.invalidFrontEnd" class="form-error">
        Front end port start must be smaller than front end port end.
    </div>
    <div *ngIf="form.errors?.insufficientPorts" class="form-error">
        Front end port range must contain at least {{minFrontendRange}} ports.
    </div>
    <div *ngIf="form.errors?.overlappedRange" class="form-error">
        Front end port range is overlapped with range {{form.errors?.overlappedRange.start}} - {{form.errors?.overlappedRange.end}}
    </div>
    <div class="form-element pad-top">
        <h4>Network security group rules</h4>
        <bl-network-security-group-rules
            formControlName="networkSecurityGroupRules">
        </bl-network-security-group-rules>
        <div *ngIf="networkSecurityGroupRules.errors?.duplicatePriority" class="form-error">
            Network security rule priority must be unique between {{minRulePriority}} and {{maxRulePriority}}
        </div>
        <div *ngIf="networkSecurityGroupRules.errors?.outOfRange" class="form-error">
            Network security rule priority must be between {{minRulePriority}} and {{maxRulePriority}}
        </div>
        <div *ngIf="networkSecurityGroupRules.errors?.maximumReached" class="form-error">
            Number of network security rules can not exceed {{maxRules}}
        </div>
    </div>
</div>
