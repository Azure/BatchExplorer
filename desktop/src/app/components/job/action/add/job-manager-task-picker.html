<div [formGroup]="form">
    <div class="form-element">
        <bl-form-field>
            <input blInput formControlName="id" placeholder="{{'common.id' | i18n}}">
        </bl-form-field>
        <bl-error controlName="id" code="required">{{'common.required' | i18n}}</bl-error>
    </div>
    <div class="form-element">
        <bl-form-field>
            <input blInput formControlName="displayName" placeholder="Display name">
        </bl-form-field>
    </div>
    <div class="form-element">
        <bl-form-field>
            <textarea blInput matTextareaAutosize matAutosizeMinRows="1" blSingleLineTextarea formControlName="commandLine" placeholder="{{'job.label.commandLine' | i18n}}"></textarea>
        </bl-form-field>
        <bl-error controlName="commandLine" code="required">{{'common.required' | i18n}}</bl-error>
    </div>
    <div formGroupName="constraints">
        <bl-form-field>
            <bl-duration-picker formControlName="maxWallClockTime" label="{{'job.label.maxWallClockTime' | i18n}}"></bl-duration-picker>
        </bl-form-field>
        <bl-form-field>
            <input blInput formControlName="maxTaskRetryCount" placeholder="{{'job.label.maxTaskRetryCount' | i18n}}" type="number">
            <bl-error controlName="maxTaskRetryCount" code="validateRange">{{'job.error.notInRange' | i18n:{'min': -1, 'max': 100} }}</bl-error>
        </bl-form-field>
        <bl-form-field>
            <bl-duration-picker formControlName="retentionTime" label="{{'job.label.retentionTime' | i18n}}" [allowUnlimited]="false" [defaultDuration]="7" required></bl-duration-picker>
        </bl-form-field>
    </div>
    <div class="form-element">
        <bl-form-field>
            <input blInput formControlName="requiredSlots" placeholder="{{'job.label.requiredSlots' | i18n}}">
        </bl-form-field>
        <bl-error controlName="requiredSlots" code="required">{{'common.required' | i18n}}</bl-error>
        <bl-error controlName="requiredSlots" code="min">{{'job.error.belowMin' | i18n:{'min': 1} }}</bl-error>
    </div>
    <div class="form-element pad-top">
        <bl-user-identity-picker formControlName="userIdentity" [userAccounts]="userAccounts">
        </bl-user-identity-picker>
    </div>
    <div class="form-element">
        <mat-checkbox formControlName="killJobOnCompletion" color="primary">
            {{'job.label.killJobOnCompletion' | i18n}}
        </mat-checkbox>
    </div>
    <div class="form-element">
        <mat-checkbox formControlName="runExclusive" color="primary">
            {{'job.label.runExclusive' | i18n}}
        </mat-checkbox>
    </div>
    <div class="form-element pad-top">
        <bl-resourcefile-picker formControlName="resourceFiles"></bl-resourcefile-picker>
    </div>
    <div class="form-element pad-top">
        <bl-key-value-picker formControlName="environmentSettings" label="{{'job.label.environmentVariables' | i18n}}"></bl-key-value-picker>
    </div>
    <div *ngIf="virtualMachineConfiguration?.containerConfiguration" class="form-element pad-top">
        <h4>{{'job.label.containerSettings' | i18n}}</h4>
        <bl-container-settings-picker
            formControlName="containerSettings"
            [containerConfiguration]="virtualMachineConfiguration.containerConfiguration">
        </bl-container-settings-picker>
    </div>
</div>
