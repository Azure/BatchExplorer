<!DOCTYPE html>
<html>

<head>
    <link href="./manual-proxy-configuration-window.css" rel="stylesheet" type="text/css">
</head>
<script>
    const { ipcRenderer, remote } = require("electron");
    const initial = remote.getCurrentWindow().currentSettings;

    document.addEventListener('DOMContentLoaded', function () {
        const urlEl = document.getElementById("url");
        const portEl = document.getElementById("port");
        const usernameEl = document.getElementById("username");
        const passwordEl = document.getElementById("password");

        if (initial) {
            urlEl.value = initial.url || "";
            portEl.value = initial.port || "";
            usernameEl.value = initial.username || "";
            passwordEl.value = initial.password || "";
        }
    });

    function submit() {
        const urlEl = document.getElementById("url");
        const portEl = document.getElementById("port");
        const usernameEl = document.getElementById("username");
        const passwordEl = document.getElementById("password");
        ipcRenderer.send('proxy-configuration-submitted', {
            url: urlEl.value,
            port: portEl.value,
            username: usernameEl.value,
            password: passwordEl.value,
        });
    }
</script>

<body>
    <h1>Enter proxy configuration for BatchLabs</h1>
    <div class="form-element">
        <label>Url</label>
        <input id="url">
    </div>
    <div class="form-element">
        <label>Port</label>
        <input id="port">
    </div>
    <div class="form-element">
        <label>Username</label>
        <input id="username">
    </div>
    <div class="form-element">
        <label>Password</label>
        <input id="password">
    </div>
    <br>
    <button onclick="submit()">Save</button>
</body>

</html>
