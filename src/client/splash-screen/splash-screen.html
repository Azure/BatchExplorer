<!DOCTYPE html>
<style>
    body {
        background: #00416f;
        width: 100vw;
        height: 100vh;
        font-family: "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif;
        color: #d5d5d5;
    }

    body {
        overflow: hidden;
    }

    #splash-animation {
        width: 96%;
        position: relative;
        text-align: center;
        top: 0;
    }
    #splash-animation #honeycomb {
        width: 300px;
        opacity: 70%;
    }
    #magnifier {
        width: 80px;
        position: absolute;
        left: 150px;
        top: 25%;
        animation: circle 20s linear infinite;
    }

    #magnifier .magnifier-glass {
        background-color: #00416f;
        position: absolute;
        top: 9px;
        left: 9px;
        width: 61px;
        height: 61px;
        border-radius: 50%;
        box-sizing: border-box;
    }

    .title {
        position: absolute;
        bottom: 120px;
        color: #d5d5d5;
        margin: auto;
        font-size: 24px;
        width: 100%;
        text-align: center;
    }

    #message {
        color: #d5d5d5;
        font-size: 12px;
        position: absolute;
        bottom: 5px;
    }

    #brand {
        position: absolute;
        right: 0;
        bottom: 0;
    }

    #brand .logo {
        width: 120px;
    }

    @keyframes movehandle {
        0%  { transform: rotate(25deg);  }
        25% { transform: rotate(-10deg); }
        50% { transform: rotate(25deg);  }
        75% { transform: rotate(60deg);  }
    }

    @keyframes circle {
        0%   { transform: rotate(0deg)   translate(30px) rotate(-0deg)   }
        8%   { transform: rotate(30deg)  translate(30px) rotate(-30deg)  }
        17%  { transform: rotate(60deg)  translate(30px) rotate(-60deg)  }
        25%  { transform: rotate(90deg)  translate(30px) rotate(-90deg)  }
        33%  { transform: rotate(120deg) translate(30px) rotate(-120deg) }
        42%  { transform: rotate(150deg) translate(30px) rotate(-150deg) }
        50%  { transform: rotate(180deg) translate(30px) rotate(-180deg) }
        58%  { transform: rotate(210deg) translate(30px) rotate(-210deg) }
        67%  { transform: rotate(240deg) translate(30px) rotate(-240deg) }
        75%  { transform: rotate(270deg) translate(30px) rotate(-270deg) }
        83%  { transform: rotate(300deg) translate(30px) rotate(-300deg) }
        92%  { transform: rotate(330deg) translate(30px) rotate(-330deg) }
        100% { transform: rotate(360deg) translate(30px) rotate(-360deg) }
    }
</style>
<html>

<script>
    const UPDATE_INTERVAL = 30;
    const ZOOM_FACTOR = 2;
    const BW = 3;
    document.addEventListener("DOMContentLoaded", () => {
        const message = document.getElementById("message");
        const {ipcRenderer} = require("electron");
        ipcRenderer.on("update-message", (event, arg) => {
            message.innerHTML = arg;
        });
        magnify("honeycomb", ZOOM_FACTOR);
    })

    function magnify(imgID, zoom) {
        const img = document.getElementById(imgID);
        const glass = document.querySelector("#magnifier .magnifier-glass");
        glass.style.backgroundImage = `url(${img.src})`;
        glass.style.backgroundRepeat = "no-repeat";
        glass.style.backgroundSize =
            `${img.width * zoom}px ${img.height * zoom}px`;
        const w = glass.offsetWidth / 2;
        const h = glass.offsetHeight / 2;

        setInterval(() => {
            const pos = glass.getBoundingClientRect();
            const x = pos.left;
            const y = pos.top;
            glass.style.backgroundPosition =
                `-${(x * zoom) - w + BW}px -${(y * zoom) - h + BW}px`;

        }, UPDATE_INTERVAL);
    }

    window.onload = () => magnify("honeycomb", ZOOM_FACTOR);

</script>

<body>
    <div id="splash-animation">
        <img id="honeycomb" src="./honeycomb.png" title="Splash window background"/>
        <div id="magnifier">
            <img class="magnifier-frame" src="./magnifying-glass.png" title="magnifier"/>
            <div class="magnifier-glass"></div>
        </div>
    </div>

    <div class="title">
        Azure Batch Explorer
    </div>

    <div id="message">
    </div>
    <div id="brand">
        <img class="logo" src="./microsoft-logo.png" title="Microsoft logo"/>
    </div>
</body>

</html>
